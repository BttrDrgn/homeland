.include "macros.inc"

.section .text, "ax"  # 0x800056A0 - 0x800E2460

# start of file_io.c
.global fflush
fflush:
/* 800D236C 000CF2CC  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 800D2370 000CF2D0  7C 08 02 A6 */	mflr r0
/* 800D2374 000CF2D4  90 01 00 14 */	stw r0, 0x14(r1)
/* 800D2378 000CF2D8  93 E1 00 0C */	stw r31, 0xc(r1)
/* 800D237C 000CF2DC  7C 7F 1B 79 */	or. r31, r3, r3
/* 800D2380 000CF2E0  93 C1 00 08 */	stw r30, 8(r1)
/* 800D2384 000CF2E4  40 82 00 0C */	bne lbl_800D2390
/* 800D2388 000CF2E8  4B FF C3 E5 */	bl __flush_all
/* 800D238C 000CF2EC  48 00 01 00 */	b lbl_800D248C
lbl_800D2390:
/* 800D2390 000CF2F0  88 1F 00 0A */	lbz r0, 0xa(r31)
/* 800D2394 000CF2F4  28 00 00 00 */	cmplwi r0, 0
/* 800D2398 000CF2F8  40 82 00 10 */	bne lbl_800D23A8
/* 800D239C 000CF2FC  A0 1F 00 04 */	lhz r0, 4(r31)
/* 800D23A0 000CF300  54 00 D7 7F */	rlwinm. r0, r0, 0x1a, 0x1d, 0x1f
/* 800D23A4 000CF304  40 82 00 0C */	bne lbl_800D23B0
lbl_800D23A8:
/* 800D23A8 000CF308  38 60 FF FF */	li r3, -1
/* 800D23AC 000CF30C  48 00 00 E0 */	b lbl_800D248C
lbl_800D23B0:
/* 800D23B0 000CF310  88 1F 00 04 */	lbz r0, 4(r31)
/* 800D23B4 000CF314  54 00 EF 7E */	rlwinm r0, r0, 0x1d, 0x1d, 0x1f
/* 800D23B8 000CF318  28 00 00 01 */	cmplwi r0, 1
/* 800D23BC 000CF31C  40 82 00 0C */	bne lbl_800D23C8
/* 800D23C0 000CF320  38 60 00 00 */	li r3, 0
/* 800D23C4 000CF324  48 00 00 C8 */	b lbl_800D248C
lbl_800D23C8:
/* 800D23C8 000CF328  88 7F 00 08 */	lbz r3, 8(r31)
/* 800D23CC 000CF32C  54 60 DF 7E */	rlwinm r0, r3, 0x1b, 0x1d, 0x1f
/* 800D23D0 000CF330  28 00 00 03 */	cmplwi r0, 3
/* 800D23D4 000CF334  41 80 00 10 */	blt lbl_800D23E4
/* 800D23D8 000CF338  38 00 00 02 */	li r0, 2
/* 800D23DC 000CF33C  50 03 2E 34 */	rlwimi r3, r0, 5, 0x18, 0x1a
/* 800D23E0 000CF340  98 7F 00 08 */	stb r3, 8(r31)
lbl_800D23E4:
/* 800D23E4 000CF344  88 1F 00 08 */	lbz r0, 8(r31)
/* 800D23E8 000CF348  54 00 DF 7E */	rlwinm r0, r0, 0x1b, 0x1d, 0x1f
/* 800D23EC 000CF34C  28 00 00 02 */	cmplwi r0, 2
/* 800D23F0 000CF350  40 82 00 0C */	bne lbl_800D23FC
/* 800D23F4 000CF354  38 00 00 00 */	li r0, 0
/* 800D23F8 000CF358  90 1F 00 28 */	stw r0, 0x28(r31)
lbl_800D23FC:
/* 800D23FC 000CF35C  88 9F 00 08 */	lbz r4, 8(r31)
/* 800D2400 000CF360  54 80 DF 7E */	rlwinm r0, r4, 0x1b, 0x1d, 0x1f
/* 800D2404 000CF364  28 00 00 01 */	cmplwi r0, 1
/* 800D2408 000CF368  41 82 00 18 */	beq lbl_800D2420
/* 800D240C 000CF36C  38 00 00 00 */	li r0, 0
/* 800D2410 000CF370  38 60 00 00 */	li r3, 0
/* 800D2414 000CF374  50 04 2E 34 */	rlwimi r4, r0, 5, 0x18, 0x1a
/* 800D2418 000CF378  98 9F 00 08 */	stb r4, 8(r31)
/* 800D241C 000CF37C  48 00 00 70 */	b lbl_800D248C
lbl_800D2420:
/* 800D2420 000CF380  A0 1F 00 04 */	lhz r0, 4(r31)
/* 800D2424 000CF384  54 00 D7 7E */	rlwinm r0, r0, 0x1a, 0x1d, 0x1f
/* 800D2428 000CF388  28 00 00 01 */	cmplwi r0, 1
/* 800D242C 000CF38C  41 82 00 0C */	beq lbl_800D2438
/* 800D2430 000CF390  3B C0 00 00 */	li r30, 0
/* 800D2434 000CF394  48 00 00 10 */	b lbl_800D2444
lbl_800D2438:
/* 800D2438 000CF398  7F E3 FB 78 */	mr r3, r31
/* 800D243C 000CF39C  48 00 04 CD */	bl ftell
/* 800D2440 000CF3A0  7C 7E 1B 78 */	mr r30, r3
lbl_800D2444:
/* 800D2444 000CF3A4  7F E3 FB 78 */	mr r3, r31
/* 800D2448 000CF3A8  38 80 00 00 */	li r4, 0
/* 800D244C 000CF3AC  4B FF FA 35 */	bl __flush_buffer
/* 800D2450 000CF3B0  2C 03 00 00 */	cmpwi r3, 0
/* 800D2454 000CF3B4  41 82 00 1C */	beq lbl_800D2470
/* 800D2458 000CF3B8  38 60 00 01 */	li r3, 1
/* 800D245C 000CF3BC  38 00 00 00 */	li r0, 0
/* 800D2460 000CF3C0  98 7F 00 0A */	stb r3, 0xa(r31)
/* 800D2464 000CF3C4  38 60 FF FF */	li r3, -1
/* 800D2468 000CF3C8  90 1F 00 28 */	stw r0, 0x28(r31)
/* 800D246C 000CF3CC  48 00 00 20 */	b lbl_800D248C
lbl_800D2470:
/* 800D2470 000CF3D0  88 1F 00 08 */	lbz r0, 8(r31)
/* 800D2474 000CF3D4  38 80 00 00 */	li r4, 0
/* 800D2478 000CF3D8  50 80 2E 34 */	rlwimi r0, r4, 5, 0x18, 0x1a
/* 800D247C 000CF3DC  38 60 00 00 */	li r3, 0
/* 800D2480 000CF3E0  98 1F 00 08 */	stb r0, 8(r31)
/* 800D2484 000CF3E4  93 DF 00 18 */	stw r30, 0x18(r31)
/* 800D2488 000CF3E8  90 9F 00 28 */	stw r4, 0x28(r31)
lbl_800D248C:
/* 800D248C 000CF3EC  80 01 00 14 */	lwz r0, 0x14(r1)
/* 800D2490 000CF3F0  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 800D2494 000CF3F4  83 C1 00 08 */	lwz r30, 8(r1)
/* 800D2498 000CF3F8  7C 08 03 A6 */	mtlr r0
/* 800D249C 000CF3FC  38 21 00 10 */	addi r1, r1, 0x10
/* 800D24A0 000CF400  4E 80 00 20 */	blr 

.global fclose
fclose:
/* 800D24A4 000CF404  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800D24A8 000CF408  7C 08 02 A6 */	mflr r0
/* 800D24AC 000CF40C  90 01 00 24 */	stw r0, 0x24(r1)
/* 800D24B0 000CF410  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800D24B4 000CF414  7C 7F 1B 79 */	or. r31, r3, r3
/* 800D24B8 000CF418  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800D24BC 000CF41C  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800D24C0 000CF420  40 82 00 0C */	bne lbl_800D24CC
/* 800D24C4 000CF424  38 60 FF FF */	li r3, -1
/* 800D24C8 000CF428  48 00 01 7C */	b lbl_800D2644
lbl_800D24CC:
/* 800D24CC 000CF42C  A0 1F 00 04 */	lhz r0, 4(r31)
/* 800D24D0 000CF430  54 03 D7 7F */	rlwinm. r3, r0, 0x1a, 0x1d, 0x1f
/* 800D24D4 000CF434  40 82 00 0C */	bne lbl_800D24E0
/* 800D24D8 000CF438  38 60 00 00 */	li r3, 0
/* 800D24DC 000CF43C  48 00 01 68 */	b lbl_800D2644
lbl_800D24E0:
/* 800D24E0 000CF440  28 1F 00 00 */	cmplwi r31, 0
/* 800D24E4 000CF444  40 82 00 10 */	bne lbl_800D24F4
/* 800D24E8 000CF448  4B FF C2 85 */	bl __flush_all
/* 800D24EC 000CF44C  7C 7D 1B 78 */	mr r29, r3
/* 800D24F0 000CF450  48 00 00 F4 */	b lbl_800D25E4
lbl_800D24F4:
/* 800D24F4 000CF454  88 1F 00 0A */	lbz r0, 0xa(r31)
/* 800D24F8 000CF458  28 00 00 00 */	cmplwi r0, 0
/* 800D24FC 000CF45C  40 82 00 0C */	bne lbl_800D2508
/* 800D2500 000CF460  28 03 00 00 */	cmplwi r3, 0
/* 800D2504 000CF464  40 82 00 0C */	bne lbl_800D2510
lbl_800D2508:
/* 800D2508 000CF468  3B A0 FF FF */	li r29, -1
/* 800D250C 000CF46C  48 00 00 D8 */	b lbl_800D25E4
lbl_800D2510:
/* 800D2510 000CF470  88 1F 00 04 */	lbz r0, 4(r31)
/* 800D2514 000CF474  54 00 EF 7E */	rlwinm r0, r0, 0x1d, 0x1d, 0x1f
/* 800D2518 000CF478  28 00 00 01 */	cmplwi r0, 1
/* 800D251C 000CF47C  40 82 00 0C */	bne lbl_800D2528
/* 800D2520 000CF480  3B A0 00 00 */	li r29, 0
/* 800D2524 000CF484  48 00 00 C0 */	b lbl_800D25E4
lbl_800D2528:
/* 800D2528 000CF488  88 7F 00 08 */	lbz r3, 8(r31)
/* 800D252C 000CF48C  54 60 DF 7E */	rlwinm r0, r3, 0x1b, 0x1d, 0x1f
/* 800D2530 000CF490  28 00 00 03 */	cmplwi r0, 3
/* 800D2534 000CF494  41 80 00 10 */	blt lbl_800D2544
/* 800D2538 000CF498  38 00 00 02 */	li r0, 2
/* 800D253C 000CF49C  50 03 2E 34 */	rlwimi r3, r0, 5, 0x18, 0x1a
/* 800D2540 000CF4A0  98 7F 00 08 */	stb r3, 8(r31)
lbl_800D2544:
/* 800D2544 000CF4A4  88 1F 00 08 */	lbz r0, 8(r31)
/* 800D2548 000CF4A8  54 00 DF 7E */	rlwinm r0, r0, 0x1b, 0x1d, 0x1f
/* 800D254C 000CF4AC  28 00 00 02 */	cmplwi r0, 2
/* 800D2550 000CF4B0  40 82 00 0C */	bne lbl_800D255C
/* 800D2554 000CF4B4  38 00 00 00 */	li r0, 0
/* 800D2558 000CF4B8  90 1F 00 28 */	stw r0, 0x28(r31)
lbl_800D255C:
/* 800D255C 000CF4BC  88 7F 00 08 */	lbz r3, 8(r31)
/* 800D2560 000CF4C0  54 60 DF 7E */	rlwinm r0, r3, 0x1b, 0x1d, 0x1f
/* 800D2564 000CF4C4  28 00 00 01 */	cmplwi r0, 1
/* 800D2568 000CF4C8  41 82 00 14 */	beq lbl_800D257C
/* 800D256C 000CF4CC  3B A0 00 00 */	li r29, 0
/* 800D2570 000CF4D0  53 A3 2E 34 */	rlwimi r3, r29, 5, 0x18, 0x1a
/* 800D2574 000CF4D4  98 7F 00 08 */	stb r3, 8(r31)
/* 800D2578 000CF4D8  48 00 00 6C */	b lbl_800D25E4
lbl_800D257C:
/* 800D257C 000CF4DC  A0 1F 00 04 */	lhz r0, 4(r31)
/* 800D2580 000CF4E0  54 00 D7 7E */	rlwinm r0, r0, 0x1a, 0x1d, 0x1f
/* 800D2584 000CF4E4  28 00 00 01 */	cmplwi r0, 1
/* 800D2588 000CF4E8  41 82 00 0C */	beq lbl_800D2594
/* 800D258C 000CF4EC  3B C0 00 00 */	li r30, 0
/* 800D2590 000CF4F0  48 00 00 10 */	b lbl_800D25A0
lbl_800D2594:
/* 800D2594 000CF4F4  7F E3 FB 78 */	mr r3, r31
/* 800D2598 000CF4F8  48 00 03 71 */	bl ftell
/* 800D259C 000CF4FC  7C 7E 1B 78 */	mr r30, r3
lbl_800D25A0:
/* 800D25A0 000CF500  7F E3 FB 78 */	mr r3, r31
/* 800D25A4 000CF504  38 80 00 00 */	li r4, 0
/* 800D25A8 000CF508  4B FF F8 D9 */	bl __flush_buffer
/* 800D25AC 000CF50C  2C 03 00 00 */	cmpwi r3, 0
/* 800D25B0 000CF510  41 82 00 1C */	beq lbl_800D25CC
/* 800D25B4 000CF514  38 60 00 01 */	li r3, 1
/* 800D25B8 000CF518  38 00 00 00 */	li r0, 0
/* 800D25BC 000CF51C  98 7F 00 0A */	stb r3, 0xa(r31)
/* 800D25C0 000CF520  3B A0 FF FF */	li r29, -1
/* 800D25C4 000CF524  90 1F 00 28 */	stw r0, 0x28(r31)
/* 800D25C8 000CF528  48 00 00 1C */	b lbl_800D25E4
lbl_800D25CC:
/* 800D25CC 000CF52C  3B A0 00 00 */	li r29, 0
/* 800D25D0 000CF530  88 1F 00 08 */	lbz r0, 8(r31)
/* 800D25D4 000CF534  53 A0 2E 34 */	rlwimi r0, r29, 5, 0x18, 0x1a
/* 800D25D8 000CF538  98 1F 00 08 */	stb r0, 8(r31)
/* 800D25DC 000CF53C  93 DF 00 18 */	stw r30, 0x18(r31)
/* 800D25E0 000CF540  93 BF 00 28 */	stw r29, 0x28(r31)
lbl_800D25E4:
/* 800D25E4 000CF544  81 9F 00 44 */	lwz r12, 0x44(r31)
/* 800D25E8 000CF548  80 7F 00 00 */	lwz r3, 0(r31)
/* 800D25EC 000CF54C  7D 89 03 A6 */	mtctr r12
/* 800D25F0 000CF550  4E 80 04 21 */	bctrl 
/* 800D25F4 000CF554  A0 1F 00 04 */	lhz r0, 4(r31)
/* 800D25F8 000CF558  38 80 00 00 */	li r4, 0
/* 800D25FC 000CF55C  50 80 35 F2 */	rlwimi r0, r4, 6, 0x17, 0x19
/* 800D2600 000CF560  7C 7E 1B 78 */	mr r30, r3
/* 800D2604 000CF564  B0 1F 00 04 */	sth r0, 4(r31)
/* 800D2608 000CF568  90 9F 00 00 */	stw r4, 0(r31)
/* 800D260C 000CF56C  88 1F 00 08 */	lbz r0, 8(r31)
/* 800D2610 000CF570  54 00 E7 FF */	rlwinm. r0, r0, 0x1c, 0x1f, 0x1f
/* 800D2614 000CF574  41 82 00 0C */	beq lbl_800D2620
/* 800D2618 000CF578  80 7F 00 1C */	lwz r3, 0x1c(r31)
/* 800D261C 000CF57C  4B FF BC 9D */	bl free
lbl_800D2620:
/* 800D2620 000CF580  2C 1D 00 00 */	cmpwi r29, 0
/* 800D2624 000CF584  38 60 00 00 */	li r3, 0
/* 800D2628 000CF588  40 82 00 0C */	bne lbl_800D2634
/* 800D262C 000CF58C  2C 1E 00 00 */	cmpwi r30, 0
/* 800D2630 000CF590  41 82 00 08 */	beq lbl_800D2638
lbl_800D2634:
/* 800D2634 000CF594  38 60 00 01 */	li r3, 1
lbl_800D2638:
/* 800D2638 000CF598  7C 03 00 D0 */	neg r0, r3
/* 800D263C 000CF59C  7C 00 1B 78 */	or r0, r0, r3
/* 800D2640 000CF5A0  7C 03 FE 70 */	srawi r3, r0, 0x1f
lbl_800D2644:
/* 800D2644 000CF5A4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800D2648 000CF5A8  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800D264C 000CF5AC  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800D2650 000CF5B0  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800D2654 000CF5B4  7C 08 03 A6 */	mtlr r0
/* 800D2658 000CF5B8  38 21 00 20 */	addi r1, r1, 0x20
/* 800D265C 000CF5BC  4E 80 00 20 */	blr 
